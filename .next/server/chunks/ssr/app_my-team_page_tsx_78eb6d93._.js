module.exports=[67746,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(68515);function f(){let[a,f]=(0,d.useState)(null),[g,h]=(0,d.useState)([]),[i,j]=(0,d.useState)(null),[k,l]=(0,d.useState)([]),[m,n]=(0,d.useState)([]),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(""),[s,t]=(0,d.useState)(""),[u,v]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let a=(0,e.getSessionUser)();if(f(a),a){let a=(0,e.getMyTeams)();h(a),a.length>0&&(j(a[0]),w(a[0]))}n((0,e.getPlayers)())},[]);let w=a=>{l(a.players.map(a=>(0,e.getPlayerById)(a)).filter(Boolean))},x=m.filter(a=>!i?.players.includes(a.id)&&a.name.toLowerCase().includes(q.toLowerCase()));return a?(0,b.jsxs)("div",{className:"app",children:[(0,b.jsx)("header",{className:"header",children:(0,b.jsxs)("div",{className:"header-inner",children:[(0,b.jsxs)(c.default,{href:"/",className:"logo",children:[(0,b.jsx)("div",{className:"logo-icon",children:(0,b.jsxs)("svg",{viewBox:"0 0 40 40",fill:"none",children:[(0,b.jsx)("circle",{cx:"20",cy:"20",r:"18",stroke:"currentColor",strokeWidth:"2.5"}),(0,b.jsx)("path",{d:"M20 4 C20 4, 8 16, 20 20 C32 24, 20 36, 20 36",stroke:"currentColor",strokeWidth:"2.5",fill:"none"}),(0,b.jsx)("path",{d:"M4 20 H36",stroke:"currentColor",strokeWidth:"2.5"})]})}),(0,b.jsxs)("div",{className:"logo-text",children:[(0,b.jsx)("span",{className:"logo-title",children:"蓝本"}),(0,b.jsx)("span",{className:"logo-sub",children:"Fantasy 篮球决策平台"})]})]}),(0,b.jsx)(c.default,{href:"/",className:"btn btn-ghost",children:"← 返回首页"})]})}),(0,b.jsx)("nav",{className:"main-nav",children:(0,b.jsxs)("div",{className:"nav-inner",children:[(0,b.jsx)(c.default,{href:"/",className:"nav-link",children:"首页"}),(0,b.jsx)(c.default,{href:"/rankings",className:"nav-link",children:"球员排名"}),(0,b.jsx)(c.default,{href:"/draft-guide",className:"nav-link",children:"选秀指南"}),(0,b.jsx)(c.default,{href:"/cheat-sheet",className:"nav-link",children:"备忘单"}),(0,b.jsx)(c.default,{href:"/how-to-play",className:"nav-link",children:"新手入门"}),(0,b.jsx)(c.default,{href:"/my-team",className:"nav-link active",children:"我的球队"}),(0,b.jsx)(c.default,{href:"/mock-draft",className:"nav-link",children:"模拟选秀"})]})}),(0,b.jsxs)("main",{className:"page-content",children:[(0,b.jsxs)("div",{className:"page-header",children:[(0,b.jsx)("h1",{className:"page-title",children:"我的球队 My Team"}),(0,b.jsx)("p",{className:"page-desc",children:"管理你的 Fantasy 篮球阵容，数据自动保存"})]}),(0,b.jsxs)("div",{className:"team-selector",children:[g.map(a=>(0,b.jsx)("button",{className:`team-tab ${i?.id===a.id?"active":""}`,onClick:()=>{j(a),w(a)},children:a.name},a.id)),(0,b.jsx)("button",{className:"team-tab add",onClick:()=>v(!0),children:"+ 新建球队"})]}),u&&(0,b.jsx)("div",{className:"modal-overlay",onClick:()=>v(!1),children:(0,b.jsxs)("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h3",{children:"创建新球队"}),(0,b.jsx)("input",{className:"form-input",placeholder:"球队名称",value:s,onChange:a=>t(a.target.value),style:{marginBottom:16}}),(0,b.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,b.jsx)("button",{className:"btn btn-ghost",onClick:()=>v(!1),children:"取消"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!s.trim())return;let a=(0,e.createMyTeam)("default",s);a.ok&&(h([...g,a.team]),j(a.team),l([]),t(""),v(!1))},children:"创建"})]})]})}),i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"team-header-bar",children:[(0,b.jsx)("h2",{children:i.name}),(0,b.jsxs)("span",{children:[k.length," 名球员"]}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:()=>p(!0),children:"+ 添加球员"})]}),o&&(0,b.jsx)("div",{className:"modal-overlay",onClick:()=>p(!1),children:(0,b.jsxs)("div",{className:"modal-content large",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h3",{children:"添加球员"}),(0,b.jsx)("input",{className:"form-input",placeholder:"搜索球员...",value:q,onChange:a=>r(a.target.value),style:{marginBottom:16}}),(0,b.jsx)("div",{className:"player-list",children:x.slice(0,20).map(a=>(0,b.jsxs)("div",{className:"player-list-item",onClick:()=>(a=>{if(!i)return;(0,e.addPlayerToTeam)(i.id,a.id);let b={...i,players:[...i.players,a.id]};j(b),l([...k,a]),h(g.map(a=>a.id===b.id?b:a)),p(!1)})(a),children:[(0,b.jsxs)("span",{className:"player-rank",children:["#",a.rank]}),(0,b.jsx)("span",{className:"player-name",children:a.name}),(0,b.jsxs)("span",{className:"player-info",children:[a.team," · ",a.position]}),(0,b.jsxs)("span",{className:"player-stats",children:[a.ppg," PPG"]})]},a.id))})]})}),0===k.length?(0,b.jsxs)("div",{className:"empty-team",children:[(0,b.jsx)("p",{children:"球队还没有球员"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:()=>p(!0),children:"添加第一个球员"})]}):(0,b.jsx)("div",{className:"roster-table",children:(0,b.jsxs)("table",{className:"data-table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"排名"}),(0,b.jsx)("th",{children:"球员"}),(0,b.jsx)("th",{children:"位置"}),(0,b.jsx)("th",{children:"球队"}),(0,b.jsx)("th",{children:"PPG"}),(0,b.jsx)("th",{children:"RPG"}),(0,b.jsx)("th",{children:"APG"}),(0,b.jsx)("th",{children:"操作"})]})}),(0,b.jsx)("tbody",{children:k.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"rank-badge",children:a.rank})}),(0,b.jsx)("td",{className:"player-cell",children:(0,b.jsx)("div",{className:"player-name",children:a.name})}),(0,b.jsx)("td",{children:a.position}),(0,b.jsx)("td",{children:a.team}),(0,b.jsx)("td",{className:"stat-highlight",children:a.ppg}),(0,b.jsx)("td",{children:a.rpg}),(0,b.jsx)("td",{children:a.apg}),(0,b.jsx)("td",{children:(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>(a=>{if(!i)return;(0,e.removePlayerFromTeam)(i.id,a);let b={...i,players:i.players.filter(b=>b!==a)};j(b),l(k.filter(b=>b.id!==a)),h(g.map(a=>a.id===b.id?b:a))})(a.id),children:"移除"})})]},a.id))})]})})]}):(0,b.jsxs)("div",{className:"empty-team",children:[(0,b.jsx)("p",{children:"你还没有球队，创建一个开始吧！"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:()=>v(!0),children:"创建球队"})]})]})]}):(0,b.jsxs)("div",{className:"app",children:[(0,b.jsx)("header",{className:"header",children:(0,b.jsx)("div",{className:"header-inner",children:(0,b.jsxs)(c.default,{href:"/",className:"logo",children:[(0,b.jsx)("div",{className:"logo-icon",children:(0,b.jsx)("svg",{viewBox:"0 0 40 40",fill:"none",children:(0,b.jsx)("circle",{cx:"20",cy:"20",r:"18",stroke:"currentColor",strokeWidth:"2.5"})})}),(0,b.jsx)("div",{className:"logo-text",children:(0,b.jsx)("span",{className:"logo-title",children:"蓝本"})})]})})}),(0,b.jsxs)("main",{className:"page-content",style:{textAlign:"center",paddingTop:100},children:[(0,b.jsx)("h1",{className:"page-title",children:"请先登录"}),(0,b.jsx)("p",{style:{color:"#64748b",marginBottom:24},children:"登录后可以管理你的 Fantasy 球队"}),(0,b.jsx)(c.default,{href:"/auth/login",className:"btn btn-primary",children:"登录"})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_my-team_page_tsx_78eb6d93._.js.map