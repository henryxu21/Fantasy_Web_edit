{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Downloads/fantasy-web/lib/supabase-admin.ts"],"sourcesContent":["// lib/supabase-admin.ts\n// Server-side Supabase client with service role key to bypass RLS\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!\n\nexport const supabaseAdmin = createClient(supabaseUrl, supabaseServiceRoleKey, {\n  auth: {\n    autoRefreshToken: false,\n    persistSession: false,\n  },\n})\n"],"names":[],"mappings":";;;;AAAA,wBAAwB;AACxB,kEAAkE;AAClE;;AAEA,MAAM;AACN,MAAM,yBAAyB,QAAQ,GAAG,CAAC,yBAAyB;AAE7D,MAAM,gBAAgB,IAAA,kNAAY,EAAC,aAAa,wBAAwB;IAC7E,MAAM;QACJ,kBAAkB;QAClB,gBAAgB;IAClB;AACF"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Downloads/fantasy-web/app/api/leagues/route.ts"],"sourcesContent":["// app/api/leagues/route.ts\nimport { NextResponse } from \"next/server\";\nimport { supabaseAdmin } from \"@/lib/supabase-admin\";\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const { name, userId } = body;\n\n    if (!name || !name.trim()) {\n      return NextResponse.json({ error: \"League name is required\" }, { status: 400 });\n    }\n\n    if (!userId) {\n      return NextResponse.json({ error: \"User ID is required\" }, { status: 400 });\n    }\n\n    const trimmedName = name.trim();\n\n    // Create league using admin client (bypasses RLS)\n    const { data: league, error: createError } = await supabaseAdmin\n      .from(\"leagues\")\n      .insert({\n        name: trimmedName,\n        commissioner_id: userId,\n        max_teams: 10,\n        draft_type: \"snake\",\n      })\n      .select()\n      .single();\n\n    if (createError) {\n      console.error(\"Create league error:\", createError);\n      return NextResponse.json({ error: createError.message }, { status: 500 });\n    }\n\n    // Create draft settings\n    await supabaseAdmin.from(\"draft_settings\").insert({\n      league_id: league.id,\n      draft_type: \"snake\",\n    });\n\n    return NextResponse.json({ status: \"success\", league });\n  } catch (error: any) {\n    console.error(\"Leagues POST error:\", error);\n    return NextResponse.json({ error: error.message }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,2BAA2B;AAC3B;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG;QAEzB,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI;YACzB,OAAO,kKAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,IAAI,CAAC,QAAQ;YACX,OAAO,kKAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,MAAM,cAAc,KAAK,IAAI;QAE7B,kDAAkD;QAClD,MAAM,EAAE,MAAM,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,6JAAa,CAC7D,IAAI,CAAC,WACL,MAAM,CAAC;YACN,MAAM;YACN,iBAAiB;YACjB,WAAW;YACX,YAAY;QACd,GACC,MAAM,GACN,MAAM;QAET,IAAI,aAAa;YACf,QAAQ,KAAK,CAAC,wBAAwB;YACtC,OAAO,kKAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,YAAY,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,wBAAwB;QACxB,MAAM,6JAAa,CAAC,IAAI,CAAC,kBAAkB,MAAM,CAAC;YAChD,WAAW,OAAO,EAAE;YACpB,YAAY;QACd;QAEA,OAAO,kKAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;YAAW;QAAO;IACvD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,kKAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF"}}]
}